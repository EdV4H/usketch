# ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«å®Ÿè£…è¨ˆç”»æ›¸

## ğŸ“‹ æ¦‚è¦

ãƒ‰ãƒ©ãƒƒã‚°æ“ä½œã§ã‚­ãƒ£ãƒ³ãƒã‚¹å…¨ä½“ã‚’ç§»å‹•ã§ãã‚‹**ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«ï¼ˆHand Toolï¼‰**ã‚’XState v5çŠ¶æ…‹ãƒã‚·ãƒ³ã¨ã—ã¦å®Ÿè£…ã—ã¾ã™ã€‚

## ğŸ¯ ç›®çš„

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦è‡ªç”±ã«è¡¨ç¤ºé ˜åŸŸã‚’ç§»å‹•ã§ãã‚‹
- ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼æŠ¼ä¸‹æ™‚ã«ä¸€æ™‚çš„ã«ãƒ‘ãƒ³ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆå¯èƒ½
- ã‚¹ãƒ ãƒ¼ã‚ºãªãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆç§»å‹•ä½“é¨“ã‚’æä¾›
- æ—¢å­˜ã®ãƒ„ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¨çµ±åˆ

## ğŸ“ è¦ä»¶å®šç¾©

### æ©Ÿèƒ½è¦ä»¶

#### 1. åŸºæœ¬æ©Ÿèƒ½
- âœ… ãƒ‰ãƒ©ãƒƒã‚°æ“ä½œã«ã‚ˆã‚‹ã‚­ãƒ£ãƒ³ãƒã‚¹ç§»å‹•
- âœ… ãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ã®å¤‰æ›´ï¼ˆhand/grab ã‚¢ã‚¤ã‚³ãƒ³ï¼‰
- âœ… ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼æŠ¼ä¸‹ã§ä¸€æ™‚çš„ã«ãƒ‘ãƒ³ãƒ¢ãƒ¼ãƒ‰ã¸ç§»è¡Œ
- âœ… ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ãƒªãƒªãƒ¼ã‚¹ã§å…ƒã®ãƒ„ãƒ¼ãƒ«ã«å¾©å¸°

#### 2. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
- **ãƒ‰ãƒ©ãƒƒã‚°é–‹å§‹**: ãƒã‚¦ã‚¹ãƒœã‚¿ãƒ³æŠ¼ä¸‹
- **ãƒ‰ãƒ©ãƒƒã‚°ä¸­**: ãƒã‚¦ã‚¹ç§»å‹•ã«å¿œã˜ã¦ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆæ›´æ–°
- **ãƒ‰ãƒ©ãƒƒã‚°çµ‚äº†**: ãƒã‚¦ã‚¹ãƒœã‚¿ãƒ³ãƒªãƒªãƒ¼ã‚¹

#### 3. ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆæ›´æ–°
- ãƒ‰ãƒ©ãƒƒã‚°é‡ã«å¿œã˜ã¦Zustandã‚¹ãƒˆã‚¢ã®`viewport`ã‚’æ›´æ–°
- `viewport.x`ã¨`viewport.y`ã‚’å¤‰æ›´ã—ã¦ã‚­ãƒ£ãƒ³ãƒã‚¹ä½ç½®ã‚’èª¿æ•´

### éæ©Ÿèƒ½è¦ä»¶

- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: 60FPSä»¥ä¸Šã®ã‚¹ãƒ ãƒ¼ã‚ºãªãƒ‰ãƒ©ãƒƒã‚°
- **å‹å®‰å…¨æ€§**: TypeScript + XState v5ã®å‹æ¨è«–ã‚’æ´»ç”¨
- **ä¿å®ˆæ€§**: æ—¢å­˜ãƒ„ãƒ¼ãƒ«ï¼ˆSelect, Drawingï¼‰ã¨çµ±ä¸€ã•ã‚ŒãŸã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### 1. çŠ¶æ…‹ãƒã‚·ãƒ³è¨­è¨ˆï¼ˆXState v5ï¼‰

#### çŠ¶æ…‹é·ç§»å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  idle   â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
     â”‚                        â”‚
     â”‚ POINTER_DOWN           â”‚
     â†“                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚ panning â”‚ â”€â”€â”€ POINTER_UP â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†‘â”‚
     â”‚â””â”€ POINTER_MOVE (loop)
```

#### çŠ¶æ…‹è©³ç´°

| çŠ¶æ…‹ | èª¬æ˜ | ã‚«ãƒ¼ã‚½ãƒ« |
|------|------|---------|
| `idle` | å¾…æ©ŸçŠ¶æ…‹ã€ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ | `grab` |
| `panning` | ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã€ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆç§»å‹• | `grabbing` |

### 2. ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ§‹é€ 

```typescript
interface PanToolContext extends ToolContext {
  // ãƒ‘ãƒ³é–‹å§‹æ™‚ã®ãƒã‚¤ãƒ³ã‚¿ãƒ¼ä½ç½®ï¼ˆã‚¹ã‚¯ãƒªãƒ¼ãƒ³åº§æ¨™ï¼‰
  startPoint: Point | null;

  // ãƒ‘ãƒ³é–‹å§‹æ™‚ã®ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆä½ç½®
  initialViewport: {
    x: number;
    y: number;
  } | null;

  // ã‚«ãƒ¼ã‚½ãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
  cursor: 'grab' | 'grabbing';
}
```

### 3. ã‚¤ãƒ™ãƒ³ãƒˆå®šç¾©

```typescript
type PanToolEvent =
  | { type: 'POINTER_DOWN'; point: Point }
  | { type: 'POINTER_MOVE'; point: Point }
  | { type: 'POINTER_UP'; point: Point }
  | { type: 'CANCEL' };
```

## ğŸ“ å®Ÿè£…è¨ˆç”»

### Phase 1: ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«çŠ¶æ…‹ãƒã‚·ãƒ³ã®å®Ÿè£…

#### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
packages/tools/src/tools/
â”œâ”€â”€ pan-tool.ts           # ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«çŠ¶æ…‹ãƒã‚·ãƒ³ï¼ˆæ–°è¦ä½œæˆï¼‰
â””â”€â”€ __tests__/
    â””â”€â”€ pan-tool.test.ts  # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆæ–°è¦ä½œæˆï¼‰
```

#### `pan-tool.ts` å®Ÿè£…å†…å®¹

```typescript
import { assign, setup } from 'xstate';
import type { Point, ToolContext } from '../types/index';

// === ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå®šç¾© ===
export interface PanToolContext extends ToolContext {
  startPoint: Point | null;
  initialViewport: { x: number; y: number } | null;
  cursor: 'grab' | 'grabbing';
}

// === ã‚¤ãƒ™ãƒ³ãƒˆå®šç¾© ===
export type PanToolEvent =
  | { type: 'POINTER_DOWN'; point: Point }
  | { type: 'POINTER_MOVE'; point: Point }
  | { type: 'POINTER_UP'; point: Point }
  | { type: 'CANCEL' };

// === ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®šç¾© ===
const actions = {
  // ãƒ‘ãƒ³é–‹å§‹æ™‚ã®åˆæœŸåŒ–
  startPan: assign(({ context, event }) => {
    if (event.type !== 'POINTER_DOWN') return context;

    const viewport = whiteboardStore.getState().viewport;

    return {
      ...context,
      startPoint: event.point,
      initialViewport: { x: viewport.x, y: viewport.y },
      cursor: 'grabbing' as const,
    };
  }),

  // ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆæ›´æ–°ï¼ˆãƒ‰ãƒ©ãƒƒã‚°ä¸­ï¼‰
  updateViewport: ({ context, event }) => {
    if (event.type !== 'POINTER_MOVE') return;
    if (!context.startPoint || !context.initialViewport) return;

    const dx = event.point.x - context.startPoint.x;
    const dy = event.point.y - context.startPoint.y;

    // ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆã‚’é€†æ–¹å‘ã«ç§»å‹•ï¼ˆãƒ‰ãƒ©ãƒƒã‚°ã¨åŒã˜æ–¹å‘ã«ã‚­ãƒ£ãƒ³ãƒã‚¹ãŒå‹•ãï¼‰
    whiteboardStore.getState().setViewport({
      x: context.initialViewport.x - dx,
      y: context.initialViewport.y - dy,
    });
  },

  // ãƒ‘ãƒ³çµ‚äº†æ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  endPan: assign(({ context }) => ({
    ...context,
    startPoint: null,
    initialViewport: null,
    cursor: 'grab' as const,
  })),
};

// === ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«çŠ¶æ…‹ãƒã‚·ãƒ³ ===
export const createPanTool = () =>
  setup({
    types: {
      context: {} as PanToolContext,
      events: {} as PanToolEvent,
    },
    actions,
  }).createMachine({
    id: 'panTool',

    initial: 'idle',

    context: {
      startPoint: null,
      initialViewport: null,
      cursor: 'grab',
    },

    states: {
      idle: {
        on: {
          POINTER_DOWN: {
            target: 'panning',
            actions: ['startPan'],
          },
        },
      },

      panning: {
        on: {
          POINTER_MOVE: {
            actions: ['updateViewport'],
          },
          POINTER_UP: {
            target: 'idle',
            actions: ['endPan'],
          },
          CANCEL: {
            target: 'idle',
            actions: ['endPan'],
          },
        },
      },
    },
  });

// ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
export const panToolMachine = createPanTool();
```

### Phase 2: ãƒ„ãƒ¼ãƒ«è¨­å®šã¸ã®ç™»éŒ²

#### `packages/tools/src/configs/default-tools.ts` ã«è¿½åŠ 

```typescript
import { createPanTool } from '../tools/pan-tool';

// ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«ã®å‹•ä½œå®šç¾©
const panToolBehaviors: ToolBehaviors = {
  // å¿…è¦ã«å¿œã˜ã¦ã‚«ã‚¹ã‚¿ãƒ å‹•ä½œã‚’å®šç¾©
  onActivate: ({ store }) => {
    // ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«æœ‰åŠ¹åŒ–æ™‚ã®å‡¦ç†
    console.log('Pan tool activated');
  },

  onDeactivate: ({ store }) => {
    // ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«ç„¡åŠ¹åŒ–æ™‚ã®å‡¦ç†
    console.log('Pan tool deactivated');
  },
};

// getDefaultTools() ã«è¿½åŠ 
export function getDefaultTools(): ToolConfig[] {
  return [
    // ... æ—¢å­˜ãƒ„ãƒ¼ãƒ«ï¼ˆselect, rectangle, drawï¼‰
    {
      id: 'pan',
      machine: createPanTool(),
      displayName: 'Hand',
      icon: 'hand',
      shortcut: 'h',
      enabled: true,
      metadata: {
        author: 'uSketch Team',
        version: '1.0.0',
        description: 'Pan the canvas by dragging',
        category: 'navigation',
      },
      behaviors: panToolBehaviors,
    },
  ];
}
```

### Phase 3: Zustandã‚¹ãƒˆã‚¢ã®æ‹¡å¼µ

#### `packages/store/src/store.ts` ã«`setViewport`ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ ç¢ºèª

æ—¢å­˜ã®`setViewport`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç¢ºèªã—ã€å¿…è¦ã«å¿œã˜ã¦ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’è¿½åŠ ï¼š

```typescript
export interface WhiteboardStore {
  // ... æ—¢å­˜ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

  viewport: {
    x: number;
    y: number;
    zoom: number;
  };

  // ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆæ›´æ–°ãƒ¡ã‚½ãƒƒãƒ‰
  setViewport: (viewport: Partial<{ x: number; y: number; zoom: number }>) => void;
}
```

### Phase 4: UIçµ±åˆ

#### ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã¸ã®ãƒœã‚¿ãƒ³è¿½åŠ 

`apps/whiteboard/src/components/ToolBar.tsx` (ã¾ãŸã¯ç›¸å½“ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«) ã«è¿½åŠ ï¼š

```tsx
const tools = [
  { id: 'select', label: 'Select', icon: 'ğŸ‘†', shortcut: 'V' },
  { id: 'pan', label: 'Hand', icon: 'âœ‹', shortcut: 'H' }, // æ–°è¦è¿½åŠ 
  { id: 'rectangle', label: 'Rectangle', icon: 'â¬œ', shortcut: 'R' },
  { id: 'draw', label: 'Draw', icon: 'âœï¸', shortcut: 'D' },
];
```

### Phase 5: ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼é€£æºï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

#### ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ

`apps/whiteboard/src/hooks/useKeyboardShortcuts.ts` ã«è¿½åŠ ï¼š

```typescript
useEffect(() => {
  const handleKeyDown = (e: KeyboardEvent) => {
    // ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼æŠ¼ä¸‹ã§ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«ã«ä¸€æ™‚åˆ‡ã‚Šæ›¿ãˆ
    if (e.code === 'Space' && !e.repeat) {
      e.preventDefault();
      previousToolRef.current = currentTool;
      setSelectedTool('pan');
    }
  };

  const handleKeyUp = (e: KeyboardEvent) => {
    // ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ãƒªãƒªãƒ¼ã‚¹ã§å…ƒã®ãƒ„ãƒ¼ãƒ«ã«å¾©å¸°
    if (e.code === 'Space') {
      e.preventDefault();
      if (previousToolRef.current) {
        setSelectedTool(previousToolRef.current);
        previousToolRef.current = null;
      }
    }
  };

  window.addEventListener('keydown', handleKeyDown);
  window.addEventListener('keyup', handleKeyUp);

  return () => {
    window.removeEventListener('keydown', handleKeyDown);
    window.removeEventListener('keyup', handleKeyUp);
  };
}, [currentTool, setSelectedTool]);
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

`packages/tools/src/tools/__tests__/pan-tool.test.ts`

```typescript
import { describe, it, expect, vi, beforeEach } from 'vitest';
import { createActor } from 'xstate';
import { panToolMachine } from '../pan-tool';
import { whiteboardStore } from '@usketch/store';

describe('PanTool', () => {
  let actor: ReturnType<typeof createActor>;

  beforeEach(() => {
    actor = createActor(panToolMachine);
    actor.start();

    // ã‚¹ãƒˆã‚¢ã‚’ãƒ¢ãƒƒã‚¯
    vi.spyOn(whiteboardStore.getState(), 'setViewport');
  });

  it('åˆæœŸçŠ¶æ…‹ã¯ idle ã§ cursor ã¯ grab', () => {
    expect(actor.getSnapshot().value).toBe('idle');
    expect(actor.getSnapshot().context.cursor).toBe('grab');
  });

  it('POINTER_DOWN ã§ panning çŠ¶æ…‹ã«é·ç§»', () => {
    actor.send({ type: 'POINTER_DOWN', point: { x: 100, y: 100 } });
    expect(actor.getSnapshot().value).toBe('panning');
    expect(actor.getSnapshot().context.cursor).toBe('grabbing');
  });

  it('POINTER_MOVE ã§ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆãŒæ›´æ–°ã•ã‚Œã‚‹', () => {
    actor.send({ type: 'POINTER_DOWN', point: { x: 100, y: 100 } });
    actor.send({ type: 'POINTER_MOVE', point: { x: 150, y: 150 } });

    expect(whiteboardStore.getState().setViewport).toHaveBeenCalled();
  });

  it('POINTER_UP ã§ idle çŠ¶æ…‹ã«æˆ»ã‚‹', () => {
    actor.send({ type: 'POINTER_DOWN', point: { x: 100, y: 100 } });
    actor.send({ type: 'POINTER_UP', point: { x: 150, y: 150 } });

    expect(actor.getSnapshot().value).toBe('idle');
    expect(actor.getSnapshot().context.cursor).toBe('grab');
  });

  it('CANCEL ã§ãƒ‘ãƒ³ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«', () => {
    actor.send({ type: 'POINTER_DOWN', point: { x: 100, y: 100 } });
    actor.send({ type: 'CANCEL' });

    expect(actor.getSnapshot().value).toBe('idle');
    expect(actor.getSnapshot().context.startPoint).toBeNull();
  });
});
```

### E2Eãƒ†ã‚¹ãƒˆ

`apps/e2e/tests/pan-tool.spec.ts`

```typescript
import { test, expect } from '@playwright/test';

test.describe('Pan Tool', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('http://localhost:5173');
  });

  test('ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æœ‰åŠ¹åŒ–', async ({ page }) => {
    await page.click('[data-testid="tool-pan"]');
    await expect(page.locator('[data-testid="tool-pan"]')).toHaveClass(/active/);
  });

  test('ãƒ‰ãƒ©ãƒƒã‚°æ“ä½œã§ã‚­ãƒ£ãƒ³ãƒã‚¹ãŒç§»å‹•', async ({ page }) => {
    await page.click('[data-testid="tool-pan"]');

    const canvas = page.locator('[data-testid="whiteboard-canvas"]');

    // åˆæœŸãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆå–å¾—
    const initialViewport = await page.evaluate(() => {
      return window.whiteboardStore.getState().viewport;
    });

    // ãƒ‰ãƒ©ãƒƒã‚°æ“ä½œ
    await canvas.hover({ position: { x: 100, y: 100 } });
    await page.mouse.down();
    await page.mouse.move(200, 200);
    await page.mouse.up();

    // ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆãŒå¤‰æ›´ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèª
    const newViewport = await page.evaluate(() => {
      return window.whiteboardStore.getState().viewport;
    });

    expect(newViewport.x).not.toBe(initialViewport.x);
    expect(newViewport.y).not.toBe(initialViewport.y);
  });

  test('ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§ä¸€æ™‚çš„ã«ãƒ‘ãƒ³ãƒ¢ãƒ¼ãƒ‰', async ({ page }) => {
    // åˆæœŸãƒ„ãƒ¼ãƒ«ã‚’ Select ã«è¨­å®š
    await page.click('[data-testid="tool-select"]');

    // ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼æŠ¼ä¸‹
    await page.keyboard.down('Space');
    await expect(page.locator('body')).toHaveCSS('cursor', /grab/);

    // ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ãƒªãƒªãƒ¼ã‚¹
    await page.keyboard.up('Space');
    await expect(page.locator('[data-testid="tool-select"]')).toHaveClass(/active/);
  });
});
```

## ğŸ“¦ ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã¾ã¨ã‚

### æ–°è¦ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«

1. `packages/tools/src/tools/pan-tool.ts` - ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«çŠ¶æ…‹ãƒã‚·ãƒ³
2. `packages/tools/src/tools/__tests__/pan-tool.test.ts` - ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
3. `apps/e2e/tests/pan-tool.spec.ts` - E2Eãƒ†ã‚¹ãƒˆ

### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«

1. `packages/tools/src/configs/default-tools.ts` - ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«è¨­å®šè¿½åŠ 
2. `packages/tools/src/index.ts` - ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆè¿½åŠ 
3. `apps/whiteboard/src/components/ToolBar.tsx` - UIãƒœã‚¿ãƒ³è¿½åŠ 
4. `apps/whiteboard/src/hooks/useKeyboardShortcuts.ts` - ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼é€£æº

## ğŸš€ å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| ãƒ•ã‚§ãƒ¼ã‚º | ã‚¿ã‚¹ã‚¯ | æ‰€è¦æ™‚é–“ | æ‹…å½“ |
|---------|--------|---------|------|
| Phase 1 | ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«çŠ¶æ…‹ãƒã‚·ãƒ³å®Ÿè£… | 2æ™‚é–“ | Developer |
| Phase 2 | ãƒ„ãƒ¼ãƒ«è¨­å®šã¸ã®ç™»éŒ² | 30åˆ† | Developer |
| Phase 3 | Zustandã‚¹ãƒˆã‚¢ç¢ºèªãƒ»æ‹¡å¼µ | 30åˆ† | Developer |
| Phase 4 | UIçµ±åˆï¼ˆãƒ„ãƒ¼ãƒ«ãƒãƒ¼ï¼‰ | 1æ™‚é–“ | Developer |
| Phase 5 | ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼é€£æº | 1æ™‚é–“ | Developer |
| Testing | ãƒ¦ãƒ‹ãƒƒãƒˆï¼‹E2Eãƒ†ã‚¹ãƒˆ | 2æ™‚é–“ | Tester |
| Review | ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‹ä¿®æ­£ | 1æ™‚é–“ | Architect |

**åˆè¨ˆ**: ç´„8æ™‚é–“

## ğŸ¯ æˆåŠŸåŸºæº–

- âœ… ãƒ‘ãƒ³ãƒ„ãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æœ‰åŠ¹åŒ–ã§ãã‚‹
- âœ… ãƒ‰ãƒ©ãƒƒã‚°æ“ä½œã§ã‚­ãƒ£ãƒ³ãƒã‚¹ãŒã‚¹ãƒ ãƒ¼ã‚ºã«ç§»å‹•ã™ã‚‹
- âœ… ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼æŠ¼ä¸‹ã§ä¸€æ™‚çš„ã«ãƒ‘ãƒ³ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ã‚ã‚‹
- âœ… ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ãƒªãƒªãƒ¼ã‚¹ã§å…ƒã®ãƒ„ãƒ¼ãƒ«ã«å¾©å¸°ã™ã‚‹
- âœ… ã‚«ãƒ¼ã‚½ãƒ«ãŒé©åˆ‡ã«å¤‰åŒ–ã™ã‚‹ï¼ˆgrab â†” grabbingï¼‰
- âœ… å…¨ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒåˆæ ¼
- âœ… å…¨E2Eãƒ†ã‚¹ãƒˆãŒåˆæ ¼

## ğŸ“š å‚è€ƒè³‡æ–™

- [XState v5 Documentation](https://stately.ai/docs/xstate)
- [Zustand Documentation](https://zustand.docs.pmnd.rs/)
- [uSketch Tool System Design](./xstate-tool-system-design.md)
- [uSketch APIä»•æ§˜æ›¸](../api/README.md)

## ğŸ”„ ä»Šå¾Œã®æ‹¡å¼µæ¡ˆ

1. **æ…£æ€§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«**: ãƒ‰ãƒ©ãƒƒã‚°çµ‚äº†å¾Œã‚‚æ…£æ€§ã§å°‘ã—ç§»å‹•
2. **ãƒ‘ãƒ³ç¯„å›²åˆ¶é™**: ç„¡é™ã«ãƒ‘ãƒ³ã§ããªã„ã‚ˆã†ã‚­ãƒ£ãƒ³ãƒã‚¹ç¯„å›²ã‚’åˆ¶é™
3. **ãƒŸãƒ‹ãƒãƒƒãƒ—é€£æº**: ãƒ‘ãƒ³æ“ä½œã‚’ãƒŸãƒ‹ãƒãƒƒãƒ—ã«åæ˜ 
4. **ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œ**: ãƒãƒ«ãƒã‚¿ãƒƒãƒã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã§ã®ãƒ‘ãƒ³æ“ä½œ

---

**ä½œæˆæ—¥**: 2025-10-03
**ä½œæˆè€…**: uSketch Development Team
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
